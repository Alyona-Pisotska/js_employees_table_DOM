{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","headers","children","tableBody","rows","querySelectorAll","directions","Array","from","map","header","forEach","call","index","addEventListener","sortColumn","newRows","direction","multiplier","sort","rowA","rowB","cellA","innerHTML","cellB","includes","isNaN","replace","row","removeChild","newRow","appendChild","e","item","classList","remove","target","closest","toggle","insertAdjacentHTML","form","addNotification","type","description","notification","notificationTitle","notificationDescription","add","setTimeout","validation","key","value","length","Number","normalize","toLocaleString","preventDefault","formData","FormData","tr","createElement","append","reset","targetCell","cellIndex","startValue","innerText","normalizeValue","input","cloneNode","firstChild","replaceWith","focus","eventKey","blur","ev","name"],"mappings":"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","file":"main.12a4a368.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst headers = table.querySelector('tr').children;\nconst tableBody = table.querySelector('tbody');\nconst rows = tableBody.querySelectorAll('tr');\n\nconst directions = Array.from(headers).map(function(header) {\n  return '';\n});\n\n[].forEach.call(headers, function(header, index) {\n  header.addEventListener('click', function() {\n    sortColumn(index);\n  });\n});\n\nconst sortColumn = function(index) {\n  const newRows = Array.from(rows);\n  const direction = directions[index] || 'asc';\n  const multiplier = (direction === 'asc') ? 1 : -1;\n\n  newRows.sort(function(rowA, rowB) {\n    let cellA = rowA.querySelectorAll('td')[index].innerHTML;\n    let cellB = rowB.querySelectorAll('td')[index].innerHTML;\n\n    if (cellA.includes('$') || !isNaN(cellB)) {\n      cellA = +cellA.replace(/[$,]/g, '');\n      cellB = +cellB.replace(/[$,]/g, '');\n    }\n\n    switch (true) {\n      case cellA > cellB:\n        return 1 * multiplier;\n      case cellA < cellB:\n        return -1 * multiplier;\n      case cellA === cellB:\n        return 0;\n    }\n  });\n\n  directions[index] = direction === 'asc' ? 'desc' : 'asc';\n\n  [].forEach.call(rows, function(row) {\n    tableBody.removeChild(row);\n  });\n\n  newRows.forEach(function(newRow) {\n    tableBody.appendChild(newRow);\n  });\n};\n\ntableBody.addEventListener('click', (e) => {\n  [...tableBody.children].forEach(item => {\n    item.classList.remove('active');\n  });\n\n  e.target.closest('tr').classList.toggle('active');\n});\n\ntable.insertAdjacentHTML('afterend', `\n  <form class=\"new-employee-form\">\n    <label>Name: <input\n      name=\"name\"\n      type=\"text\"\n      data-qa=\"name\"\n      required\n    >\n    </label>\n\n    <label>Position: <input\n      name=\"position\"\n      type=\"text\"\n      data-qa=\"position\"\n      required\n    >\n    </label>\n\n    <label>Office:\n      <select\n        name=\"office\"\n        type=\"text\"\n        data-qa=\"office\"\n        required\n      >\n        <option value=\"Tokyo\" selected>Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n\n    <label>Age: <input\n      name=\"age\"\n      type=\"number\"\n      data-qa=\"age\"\n      required\n    >\n    </label>\n\n    <label>Salary: <input\n      name=\"salary\"\n      type=\"number\"\n      data-qa=\"salary\"\n      required\n    >\n    </label>\n\n    <button type=\"submit\"\">\n      Save to table\n    </button>\n  </form>\n`);\n\nconst form = document.querySelector('.new-employee-form');\n\nfunction addNotification(type, description) {\n  form.insertAdjacentHTML('afterend', `\n    <div class=\"notification\" data-qa=\"notification\">\n      <h1 class=\"title\"></h1>\n      <p></p>\n    </div>\n  `);\n\n  const notification = document.querySelector('.notification');\n  const notificationTitle = notification.querySelector('.title');\n  const notificationDescription = notification.querySelector('p');\n\n  switch (type) {\n    case 'error':\n      notification.classList.add('error');\n      notificationTitle.innerHTML = 'ERROR';\n      break;\n\n    case 'success':\n      notification.classList.add('success');\n      notificationTitle.innerHTML = 'SUCCESS';\n      break;\n\n    default:\n      return;\n  }\n\n  notificationDescription.innerHTML = description;\n\n  setTimeout(() => {\n    notification.remove();\n  }, 3000);\n}\n\nfunction validation(key, value) {\n  if (key === 'name' && value.length < 4) {\n    addNotification('error', 'Name length should be at least 4 letters');\n\n    return false;\n  }\n\n  if (key === 'age' && (Number(value) < 18 || Number(value) > 90)) {\n    addNotification('error', 'Age should be from 18 to 90');\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction normalize(key, value) {\n  return key === 'salary'\n    ? `$${(Number(value)).toLocaleString('en-US')}`\n    : value;\n}\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const formData = new FormData(form);\n  const tr = document.createElement('tr');\n\n  for (const [key, value] of formData) {\n    if (!validation(key, value)) {\n      return;\n    }\n\n    tr.insertAdjacentHTML('beforeend', `\n      <td>${normalize(key, value)}</td>\n    `);\n  }\n\n  tableBody.append(tr);\n  form.reset();\n  addNotification('success', 'New information added to the table');\n});\n\ntableBody.addEventListener('dblclick', e => {\n  const target = e.target;\n  const targetCell = target.cellIndex;\n  const startValue = target.innerText;\n  const normalizeValue = startValue.replace(/[$,]/g, '');\n  const input = form.querySelectorAll('[name]')[targetCell].cloneNode(true);\n\n  input.classList.add('cell-input');\n  input.value = normalizeValue;\n  target.firstChild.replaceWith(input);\n  input.focus();\n\n  input.addEventListener('keypress', eventKey => {\n    if (eventKey.key === 'Enter') {\n      input.blur();\n    }\n  });\n\n  input.addEventListener('blur', ev => {\n    if (!validation(input.name, input.value) || !input.value) {\n      target.innerText = startValue;\n\n      return;\n    }\n\n    target.innerText = normalize(input.name, input.value);\n  });\n});\n"]}